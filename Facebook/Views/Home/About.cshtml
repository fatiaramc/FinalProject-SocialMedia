@{
	ViewData["Title"] = "About";
}

<html>
<head>
	<link href="~/css/style_dash.css" type="text/css" rel="stylesheet" />
</head>
	<body>

		<div class="header1">
			<!--<div id="img3" class="header1"><img src="logo.png" id="img3" /></div>-->
			<div id="img3" class="header1" style="color: white; text-decoration: none; font-size: 30px; font-weight: 900;">Faceboook</div>
			<div id="searcharea" class="header1"><input placeholder="search here..." type="text" id="searchbox" /></div>
			<div id="profilearea" class="header1"><a href="~/profile.php"><img src="prof.png" id="profpic" /></a></div>
			<div id="profilearea1" class="header1"><a href="About">Profile</a></div>
			<div id="profilearea3" class="header1">|</div>
			<div id="profilearea4" class="header1">Home</div>
			<div id="findf" class="header1"><img src="~/frn.png" height="30" /></div>
			<div id="message" class="header1"><img src="~/chat.png" height="30" /></div>
			<div id="notification" class="header1"><img src="~/noti.png" height="30" /></div>
			<div id="profilearea2" class="header1">|</div>
			<div id="setting" class="header1"><img src="~/set.png" height="30" /></div>
			<div id="logout" class="header1"><img src="~/lo.png" height="30" /></div>
		</div>

		<p>Use this area to provide additional information.</p>
		<div>

			<div class="row">
				<div class="col-lg-3" style="align-content:center">
					<img src="@UsuarioActual.GetUsuarioActual().GetUser().picture" style="width:200px;height:200px;"/>
				</div>
				<div class="col-lg-4">
					<h3>@UsuarioActual.GetUsuarioActual().GetUser().Nombre @UsuarioActual.GetUsuarioActual().GetUser().Apellido</h3>
					<h5><b>Correo:</b> @UsuarioActual.GetUsuarioActual().GetUser().correo_electronico</h5>
					<h5><b>Fecha de nacimiento:</b> @UsuarioActual.GetUsuarioActual().GetUser().FechaToString()</h5>
					@if (@UsuarioActual.GetUsuarioActual().GetUser().descripcion != null)
					{
						<h5><b>Descripción: </b>@UsuarioActual.GetUsuarioActual().GetUser().descripcion</h5>
					}
					else
					{
						<h5>Por el momento no tienes descripción, agrega una!</h5>
					}

					<a style="float:right; color:cornflowerblue" data-toggle="modal" data-target="#myModal">Cambiar descripción</a>

					<!-- Modal -->
					<div id="myModal" class="modal fade" role="dialog">
						<div class="modal-dialog">

							<!-- Modal content-->
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<h4 class="modal-title">Editar descripción</h4>
								</div>
								<div class="modal-body">
									<p>Escribe algo sobre tí para que tus amigos te conozcan mejor!</p>
									<p>Recuerda que para poder ver tus cambios debes refrescar la página.</p>
									<textarea name="paragraph_text" id="desc" cols="76" rows="10"></textarea>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-default" onclick="GuardarDesc()" data-dismiss="modal">Guardar</button>
									<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
								</div>
							</div>

						</div>
					</div>
				</div>
				
				
			</div>
			
			<h2>Amigos</h2>

			@foreach (var amigo in UsuarioActual.GetUsuarioActual().GetAmigos())
			{
				<div class="col-lg-5" style="background-color:whitesmoke">
					<div class="col-lg-4">
						<img src="@amigo.picture" style="width:150px; height:150px" />
					</div>
					<div class="col-lg-7" style="margin:12pt">
						<h3>@amigo.Nombre @amigo.Apellido</h3>
						<h5><b>Correo: </b>@amigo.correo_electronico</h5>
						<h5><b>Cumpleaños: </b> @amigo.FechaToString()</h5>
					</div>

				</div>
				<div class="col-lg-1"></div>

			}
		</div>
		<script>
			function GuardarDesc() {
				var x = document.getElementById("desc");
				console.log(x.value);
				$.ajax({
					async: true,
					type: "POST",
					url: '@Url.Action("EditUserDesc", "Home")',
					data: { "Descripcion": x.value },
					//data: x.value,
					dataType:"JSON",	
					success: function (response) {
						if (response.success) {

							console.log('success');
							//alert('nombre:',sessionStorage.getItem('nombre'));					
							//window.location = response.redirecturl;
					
						}
					}
				});
				
				console.log('termine');
				
			}

		</script>
	</body>
</html>
